{"./":{"url":"./","title":"Introduction","keywords":"","body":"Kamigo ç°¡ä»‹ Kamigo æ˜¯ä¸€å€‹åŸºæ–¼ Rails çš„ Chatbot MVC Frameworkã€‚ Kamigo è®“ä½ é–‹ç™¼ Chatbot å°±è·Ÿé–‹ç™¼ç¶²ç«™ä¸€æ¨£å®¹æ˜“ï¼Œç”šè‡³å¯ä»¥åŒæ™‚é–‹ç™¼ç¶²ç«™ä»¥åŠ Chatbot ä»‹é¢ï¼Œå…±ç”¨ Controller å’Œ Modelï¼Œåªéœ€è¦é‡å° Chatbot å¯¦ä½œ Viewã€‚ Kamigo æä¾›äº†é‡è¦çš„ generatorï¼Œè®“ä½ é–‹ç™¼èŠå¤©æ©Ÿå™¨äººæ™‚å¯ä»¥å¿«çš„è·Ÿé£›ä¸€æ¨£ã€‚ ä»¥ä¸‹å°‡èªªæ˜å¦‚ä½•ä½¿ç”¨ Kamigo ä¾†è£½ä½œ Todo çš„æ•™å­¸æ–‡ä»¶ã€‚ å»ºç«‹æ–°çš„ rails å°ˆæ¡ˆ å°‡ä»¥ä¸‹æŒ‡ä»¤å…¨éƒ¨è¤‡è£½ï¼Œç›´æ¥è²¼åˆ° bash åŸ·è¡Œå³å¯ã€‚ # å»ºç«‹æ–°å°ˆæ¡ˆ rails new kamigo_demo # é€²å…¥å°ˆæ¡ˆ cd kamigo_demo # å®‰è£å¥—ä»¶ bundle add kamigo bundle add dotenv-rails # æ–°å¢ resource controller rails g scaffold todo name desc rails db:create rails db:migrate è¨­å®šé¦–é  åœ¨ config/routes.rb ç•¶ä¸­åŠ å…¥é¦–é è¨­å®šï¼š root to: \"todos#index\" å®‰è£ js å¥—ä»¶ åœ¨ app/assets/javascripts/application.js ç•¶ä¸­åŠ å…¥ä¸€è¡Œç¨‹å¼ç¢¼ï¼š //= require kamiliff è¨­å®šèŠå¤©æ©Ÿå™¨äºº Webhook URL æœ¬æ–‡å‡è¨­ä½ å·²ç¶“æœ‰ä¸€å€‹è‡ªå·±çš„èŠå¤©æ©Ÿå™¨äººï¼Œè«‹å°‡ä»¥ä¸‹ç¶²å€å¡«å…¥ LINE Bot çš„ Webhook URL æ¬„ä½ä¸­ï¼š https://ä½ çš„ç¶²åŸŸ/line ç¬¬ä¸€æ¬¡é–‹ç™¼ LINE Bot çš„äººå¯ä»¥æœç”¨æ­¤å¸– Webhook URL è¨­å®š QAã€‚ è¨­å®šèŠå¤©æ©Ÿå™¨äººç’°å¢ƒè®Šæ•¸ è«‹åœ¨å°ˆæ¡ˆæ ¹ç›®éŒ„ä¸‹æ–°å¢ä¸€å€‹ .env æª”ä¸¦ä¸”å¡«å…¥ä»¥ä¸‹å…§å®¹ï¼š LINE_CHANNEL_SECRET=é€™è£¡å¡«å…¥ä½ çš„ LINE_CHANNEL_SECRET LINE_CHANNEL_TOKEN=é€™è£¡å¡«å…¥ä½ çš„ LINE_CHANNEL_ACCESS_TOKEN LIFF_COMPACT=é€™è£¡å¡«å…¥ä½ çš„ COMPACT_LIFF_URL LIFF_TALL=é€™è£¡å¡«å…¥ä½ çš„ TALL_LIFF_URL LIFF_FULL=é€™è£¡å¡«å…¥ä½ çš„ FULL_LIFF_URL LINE_CHANNEL_SECRET å¯ä»¥åœ¨ Messaging API å¾Œå°çš„ Basic settings åˆ†é ä¸­æ‰¾åˆ°ã€‚ LINE_CHANNEL_ACCESS_TOKEN å¯ä»¥åœ¨ Messaging API å¾Œå°çš„ Messaging API åˆ†é ä¸­æ‰¾åˆ°ã€‚ COMPACT_LIFF_URLã€TALL_LIFF_URL å’Œ FULL_LIFF_URL éœ€è¦åˆ° LINE å¾Œå°çš„ LIFF åˆ†é æ–°å¢å¾Œï¼Œå³å¯ç²å¾—ä¸€çµ„ LIFF URLã€‚ Kamigo é è¨­çš„ LIFF Size ç‚º Compactï¼Œä½ ä¹Ÿå¯ä»¥åªæ–°å¢ Compact LIFF URLã€‚ è©³ç´°çš„ LIFF è¨­å®šèªªæ˜å¯ä»¥æœç”¨æ­¤å¸– LIFF è¨­å®š QAã€‚ è‡³æ­¤ä¸²æ¥å®Œæˆã€‚ å¯¦éš›ä½¿ç”¨ Kamigo é è¨­ä½¿ç”¨åŸºæœ¬çš„èªæ„ç†è§£æ¨¡å‹ï¼Œæœƒå°‡ä½¿ç”¨è€…è¼¸å…¥è¦–ç‚ºåœ¨ç€è¦½å™¨ç¶²å€ä¸Šè¼¸å…¥æ–‡å­—ï¼Œä¸¦ä¸”ä»¥ LINE Flex Message ä¾†é¡¯ç¤ºå°æ‡‰çš„çµæœã€‚ é–‹å•Ÿ LINE å’ŒèŠå¤©æ©Ÿå™¨äººèªª /ï¼Œå°±èƒ½çœ‹åˆ°é¦–é çš„æ¨£å­ã€‚ ä½¿ç”¨ kamigo è£½ä½œçš„èŠå¤©æ©Ÿå™¨äºº kamigo demo å¥èº«ç´€éŒ„æ©Ÿå™¨äºº: Muscle-Man å®ˆè­·å¯µç‰©æ©Ÿå™¨äºº è©³ç´°çš„èªªæ˜æ–‡ä»¶ Kamigo æ¶æ§‹æ¦‚è§€ Route çš„ä½¿ç”¨èªªæ˜ Controller çš„ä½¿ç”¨èªªæ˜ View çš„ä½¿ç”¨èªªæ˜ Form çš„ä½¿ç”¨èªªæ˜ Kamigo ç›¸é—œè¨­å®šèˆ‡ QA è¨ˆç•« æä¾›å¤šç¨®èªæ„ç†è§£æ¨¡å‹ä¸²æ¥ ç¶²ç«™ä½¿ç”¨è€…èˆ‡èŠå¤©æ©Ÿå™¨äººä½¿ç”¨è€…ç¶å®š æ”¯æ´ Telegram æ”¯æ´ Facebook Messenger License The gem is available as open source under the terms of the MIT License. "},"01_intro.html":{"url":"01_intro.html","title":"Kamigo æ¶æ§‹æ¦‚è§€","keywords":"","body":"Kamigo æ¶æ§‹æ¦‚è§€ è¨­è¨ˆç†å¿µ Kamigo æ˜¯åŸºæ–¼ Rails çš„ Chatbot MVC Frameworkï¼Œç«­ç›¡æ‰€èƒ½çš„å°‡èŠå¤©æ©Ÿå™¨äººçš„é–‹ç™¼èˆ‡ç¶²ç«™é–‹ç™¼åšå°æ‡‰ï¼Œä¸¦ä¸”ç›¡å¯èƒ½çš„ä½¿ç”¨ Rails æ—¢æœ‰çš„åŠŸèƒ½ä¾†å¢åŠ å½ˆæ€§ã€‚ åœ¨èŠå¤©æ©Ÿå™¨äººé–‹ç™¼ç•¶ä¸­çš„ã€Œèªæ„ç†è§£ã€æ˜¯å°æ‡‰åˆ°ç¶²ç«™é–‹ç™¼ç•¶ä¸­çš„è·¯ç”±ï¼ˆRouteï¼‰ã€‚ ã€Œå°è©±ç®¡ç†ã€å°æ‡‰åˆ° Controller ä»¥åŠ Modelã€‚ è€Œã€Œèªè¨€ç”Ÿæˆã€å‰‡æ˜¯å°æ‡‰åˆ° viewã€‚ ä½¿ç”¨ Kamigoï¼Œä½ å¯ä»¥åŒæ™‚é–‹ç™¼ Chatbot ä»¥åŠ Webï¼Œè€Œä¸”å…±ç”¨ Controller ä»¥åŠ Modelã€‚ æ¶æ§‹æ¦‚è§€ Kamigo å¯¦ä½œäº†æ¥å— LINE Webhook çš„ Controller ä»¥åŠå°æ‡‰çš„ Routeã€‚ controller: https://github.com/etrex/Kamigo/blob/master/app/controllers/line_controller.rb routes: https://github.com/etrex/Kamigo/blob/master/config/routes.rb ä»¥ä¸Šçš„ç¨‹å¼ç¢¼ä½¿å¾— Kamigo åœ¨æ¥æ”¶åˆ°ä¾†è‡ª Webhook çš„è¨Šæ¯å¾Œï¼Œæœƒå°‡è¨Šæ¯ç”¨èªæ„ç†è§£çš„æ–¹å¼è½‰æ›ç‚ºï¼ˆIntentï¼‰ä»¥åŠé—œéµå­—ï¼ˆEntityï¼‰ï¼Œä¸¦ä¸”ç”Ÿæˆä¸€å€‹æ–°çš„ Request å†ç™¼é€çµ¦å°æ‡‰çš„ Controller Actionï¼Œå–å¾— Response å¾Œï¼Œå†ä½¿ç”¨ Reply API å°‡ Response è¨Šæ¯å›å‚³çµ¦ç”¨æˆ¶ã€‚ webhook è¨­å®š å¾ routes.rb ç•¶ä¸­å¯ä»¥çœ‹åˆ°é€™ä¸€è¡Œï¼š post 'line', to: 'line#entry' è¡¨ç¤ºç¶²ç«™æœƒæ¥å— POST åˆ° /line çš„ Requestï¼Œä¸¦ä¸”äº¤çµ¦ line_controller ç•¶ä¸­çš„ entry æ–¹æ³•ä¾†è™•ç†ã€‚ é€™è¡¨ç¤ºä½ æ‡‰è©²åœ¨ä½ çš„ LINE Bot è¨­å®š Webhook Url ç‚º https://ä½ çš„ç¶²åŸŸ/lineã€‚ rails generator åœ¨å®‰è£ Kamigo å¾Œï¼Œä½¿ç”¨ rails g scaffold å¯ä»¥ç”Ÿæˆ Kamigo é­”æ”¹å¾Œçš„ controller ä»¥åŠ viewã€‚ ä»¥ä¸‹ç°¡å–®èªªæ˜å„é …è² è²¬çš„åŠŸèƒ½ã€‚ routes Kamigo æ²’æœ‰ä¿®æ”¹ rails routes çš„å¯¦ä½œã€‚ line_controller æœƒè®€å– LINE è¨Šæ¯ç•¶ä¸­çš„æ–‡å­—è¨Šæ¯ï¼Œä¸¦ä¸”å˜—è©¦ç†è§£æ–‡å­—è¨Šæ¯ç•¶ä¸­çš„æ„åœ–ï¼ˆintentï¼‰ä»¥åŠé—œéµå­—ï¼ˆentityï¼‰ï¼Œä¹Ÿå°±æ˜¯èªæ„ç†è§£çš„éƒ¨åˆ†ï¼Œ ç›®å‰åƒ…å¯¦ä½œäº†ä¸€å€‹æœ€åŸºæœ¬çš„èªæ„ç†è§£æ¨¡å‹ï¼Œç›´æ¥å‡è¨­ç”¨æˆ¶è¼¸å…¥çš„æ–‡å­—æ˜¯ç¶²å€ä¾†åšè§£æï¼Œä¹‹å¾Œæœƒæ”¯æ´å„å¤§èªæ„ç†è§£å¹³å°çš„ä¸²æ¥ã€‚ æ“·å–å‡ºæ„åœ–ä»¥åŠé—œéµå­—ä¹‹å¾Œï¼Œæœƒå˜—è©¦æ‰¾åˆ°æ­¤æ„åœ–æ‰€å°æ‡‰çš„ controller actionï¼Œä¸¦ä¸”å°‡é—œéµå­—ä½œç‚º params å‚³å…¥æ­¤ actionã€‚ ç°¡è€Œè¨€ä¹‹ï¼Œèªæ„ç†è§£å°±åƒæ˜¯åœ¨åš routes çš„å·¥ä½œã€‚ ç›®å‰ Kamigo æ”¯æ´åœ¨ routes æ’°å¯«ä¸€äº›ç°¡å–®çš„èªæ„ç†è§£è¦å‰‡ï¼Œæ¯”æ–¹èªªï¼Œä½ å¯ä»¥åœ¨ä½ çš„å°ˆæ¡ˆç•¶ä¸­çš„ routes.rb å¯«å…¥ä»¥ä¸‹ç¨‹å¼ç¢¼ï¼š get \"ç›®éŒ„\", to: 'home#menu' ç•¶ç”¨æˆ¶åœ¨å° LINE Bot ç™¼è©±æ™‚è¼¸å…¥ã€Œç›®éŒ„ã€æ–‡å­—è¨Šæ¯æ™‚ï¼Œå°±å¯ä»¥å°‡ Request äº¤çµ¦ home_controller ç•¶ä¸­çš„ menu æ–¹æ³•ä¾†è™•ç†ã€‚ è©³ç´°èªªæ˜è«‹åƒè€ƒ route Render Format ç•¶ç”¨æˆ¶åœ¨å° LINE Bot ç™¼è©±æ™‚è¼¸å…¥ã€Œç›®éŒ„ã€æ™‚ï¼Œå¯¦éš›ä¸Šï¼ŒKamigo æœƒç”Ÿæˆä¸€å€‹ GET https://ä½ çš„ç¶²åŸŸ/ç›®éŒ„.line çš„ Request ç¶²å€ç•¶ä¸­çš„ .line æ˜¯åœ¨æŒ‡å®š render formatï¼Œç•¶ä¸€å€‹ Request çš„ Format ç‚º line çš„æ™‚å€™ï¼Œrender engine æœƒå»å˜—è©¦å°‹æ‰¾ views è³‡æ–™å¤¾ç•¶ä¸­å‰¯æª”åç‚º .line çš„æª”æ¡ˆã€‚ ä½ å¯ä»¥åœ¨ controller ç•¶ä¸­é€é params[:format] å–å¾—ç•¶ä¸‹ Request çš„ Format ç‚ºä½•ã€‚ Controller åœ¨ controller ä½ å¯ä»¥åœ¨ params æ”¶åˆ°ä¸€äº›ä¾†è‡ª Kamigo çš„åƒæ•¸ï¼Œç”¨ä¾†åšèº«åˆ†é©—è­‰æˆ–å–å¾—ç”¨æˆ¶æ‰€ç™¼å‡ºçš„é—œéµå­—ç­‰ã€‚ è©³ç´°èªªæ˜è«‹åƒè€ƒ controller View åœ¨ view ç•¶ä¸­ï¼Œç›´æ¥è¼¸å‡º LINE Message API æ‰€éœ€è¦çš„ json å³å¯ã€‚ ä½¿ç”¨ Kamiflex å¯ä»¥è®“ä½ è¼•é¬†æ‰“é€ å‡º flex messageã€‚ è©³ç´°èªªæ˜è«‹åƒè€ƒ view Form ç›®å‰ Kamigo åƒ…æä¾› LIFF ä½œç‚ºè¡¨å–®å¡«å¯«çš„è§£æ±ºæ–¹æ¡ˆï¼Œæ—¥å¾Œæœ‰å¯èƒ½æœƒåŠ å…¥å°è©±å¼è¡¨å–®çš„å¡«å¯«ã€‚ Kamigo ä½¿ç”¨ Kamiliff ä¾†è£½ä½œ LIFFï¼Œä½ å¯ä»¥åœ¨ controller å°±å–å¾—ç”¨æˆ¶èº«åˆ†çš„åƒæ•¸ã€‚ è©³ç´°èªªæ˜è«‹åƒè€ƒ form "},"02_route.html":{"url":"02_route.html","title":"Route çš„ä½¿ç”¨èªªæ˜","keywords":"","body":"Route çš„ä½¿ç”¨èªªæ˜ ä»¥ä¸‹å°‡èªªæ˜ Kamigo å¦‚ä½•è§£è®€ç”¨æˆ¶è¼¸å…¥ï¼Œä¸¦ä¸”æ‰¾å‡ºå°æ‡‰çš„ Controller Actionã€‚ èªæ„ç†è§£æ¨¡å‹ Kamigo ç›®å‰ä½¿ç”¨äº†æœ€ç°¡å–®çš„è§£æå™¨å»è§£è®€ç”¨æˆ¶è¼¸å…¥ï¼Œå…¶æ ¼å¼å¦‚ä¸‹ï¼š {{http_method}} {{path}} {{json}} èˆ‰ä¾‹ä¾†èªªï¼Œè‹¥ç”¨æˆ¶è¼¸å…¥å¦‚ä¸‹ï¼š GET /todos å³è¦–ç‚ºç”¨æˆ¶å° /todos ç™¼å‡º GET Requestã€‚ POST /todos {\"todo\":{\"name\":\"kamigo\"}} å³è¦–ç‚ºç”¨æˆ¶å° /todos ç™¼å‡º POST Requesï¼Œä¸¦ä¸”å‚³éä¸€å€‹ json ä½œç‚º bodyã€‚ é è¨­å€¼ å…¶ä¸­ï¼Œå¦‚æœ http_method æ˜¯ GET çš„è©±ï¼Œå¯çœç•¥ï¼Œpath é–‹é ­çš„ / ä¹Ÿå¯ä»¥çœç•¥ï¼Œæ‰€ä»¥ç•¶ç”¨æˆ¶çš„è¼¸å…¥å¦‚ä¸‹ï¼š GET /menu æˆ– /menu æˆ– menu å³è¦–ç‚ºç”¨æˆ¶å° /menu ç™¼å‡º GET Requestã€‚ ä¹‹å¾Œ Kamigo çš„è¨ˆç•«åŒ…å«å¯¦ä½œæ”¯æ´å„å¤§èªæ„ç†è§£å¹³å°çš„ Adapterã€‚ routes ä»¥ä¸‹ç¤ºç¯„åœ¨ routes.rb é©ç”¨æ–¼èŠå¤©æ©Ÿå™¨äººçš„å„ç¨®å¯«æ³•ã€‚ å¯ä»¥å¯«ä¸­æ–‡ get \"ç›®éŒ„\", to: 'home#menu' å¦‚æ­¤å³å¯æ¥å—ç”¨æˆ¶è¼¸å…¥ã€Œç›®éŒ„ã€æ™‚ï¼Œå°‡ Request è½‰çµ¦ home_controller çš„ menu æ–¹æ³•ä¾†è™•ç†ã€‚ å¯ä»¥ä½¿ç”¨è®Šæ•¸ get \"å­¸ *keyword *message\", to: 'keywords#learn' å¦‚æ­¤å³å¯æ¥å—ç”¨æˆ¶è¼¸å…¥ã€Œå­¸ A Bã€æ™‚ï¼Œå°‡ Request è½‰çµ¦ keywords_controller çš„ learn æ–¹æ³•ä¾†è™•ç†ï¼Œä½ å¯ä»¥åœ¨ controller ç•¶ä¸­å¯« params[:keyword] å–å¾—ç”¨æˆ¶è¼¸å…¥çš„ Aï¼Œå¯« params[:message] å–å¾—ç”¨æˆ¶è¼¸å…¥çš„ Bã€‚ è®Šæ•¸å¯åŠ æ‹¬è™Ÿï¼Œè®Šæ•¸å¯çœç•¥ get '(*location)å¤©æ°£', to: 'weathers#show' å¦‚æ­¤å³å¯æ¥å—ç”¨æˆ¶è¼¸å…¥ã€Œå°åŒ—å¤©æ°£ã€æ™‚ï¼Œå°‡ Request è½‰çµ¦ weathers_controller çš„ show æ–¹æ³•ä¾†è™•ç†ï¼Œä½ å¯ä»¥åœ¨ controller ç•¶ä¸­å¯« params[:location] å–å¾—ç”¨æˆ¶è¼¸å…¥çš„ã€Œå°åŒ—ã€ã€‚ get '(*location)å¤©æ°£', to: 'weathers#show' å¦‚æ­¤å³å¯æ¥å—ç”¨æˆ¶è¼¸å…¥ã€Œå°åŒ—å¤©æ°£ã€æ™‚ï¼Œå°‡ Request è½‰çµ¦ weathers_controller çš„ show æ–¹æ³•ä¾†è™•ç†ï¼Œä½ å¯ä»¥åœ¨ controller ç•¶ä¸­å¯« params[:location] å–å¾—ç”¨æˆ¶è¼¸å…¥çš„ã€Œå°åŒ—ã€ã€‚ get '(*location)å¤©æ°£(*other)', to: 'weathers#show' å¦‚æ­¤å³å¯æ¥å—ç”¨æˆ¶è¼¸å…¥ã€Œå°åŒ—å¤©æ°£å¦‚ä½•ã€ã€‚ "},"03_controller.html":{"url":"03_controller.html","title":"Controller çš„ä½¿ç”¨èªªæ˜","keywords":"","body":"Controller çš„ä½¿ç”¨èªªæ˜ åœ¨ controller ç•¶ä¸­ä½ å¯ä»¥å–å¾—å¹¾å€‹é‡è¦çš„ params: platform_type platform_type è¡¨ç¤ºç›®å‰çš„ Request æ˜¯ä¾†è‡ªæ–¼å“ªä¸€å€‹é€šè¨Šè»Ÿé«”ã€‚ Kamigo ç›®å‰åƒ…æ”¯æ´ LINEï¼Œå› æ­¤ platform_type çš„å€¼æœƒæ˜¯ \"line\"ã€‚ ä½ å¯ä»¥ä½¿ç”¨ä»¥ä¸‹ç¨‹å¼ç¢¼å–å¾— platform_type: params[:platform_type] source_type source_type è¡¨ç¤ºç›®å‰çš„ Request æ˜¯ä¾†è‡ªæ–¼é‚£ä¸€ç¨®å°è©±æ¡†ï¼Œå…¶å¯èƒ½çš„å€¼ç‚º \"user\"ã€\"room\"ã€\"group\"ã€‚ ä½ å¯ä»¥ä½¿ç”¨ä»¥ä¸‹ç¨‹å¼ç¢¼å–å¾— source_type: params[:source_type] source_group_id source_group_id è¡¨ç¤ºç›®å‰ Request æ˜¯ä¾†è‡ªæ–¼å“ªä¸€å€‹å°è©±æ¡†ã€‚ è‹¥ source_type çš„å€¼ç‚º \"user\"ï¼Œå‰‡ source_group_id æœƒèˆ‡ LINE æä¾›çš„ userId ç›¸ç­‰ã€‚ è‹¥ source_type çš„å€¼ç‚º \"room\" æˆ– \"group\"ï¼Œå‰‡ source_group_id çš„å€¼æœƒç­‰æ–¼ LINE æä¾›çš„ roomId æˆ– groupIdã€‚ ä½ å¯ä»¥ä½¿ç”¨ä»¥ä¸‹ç¨‹å¼ç¢¼å–å¾— source_group_id: params[:source_group_id] source_user_id source_user_id è¡¨ç¤ºç›®å‰ Request æ˜¯ä¾†è‡ªæ–¼å“ªä¸€å€‹ä½¿ç”¨è€…ã€‚ source_user_id æœƒèˆ‡ LINE æä¾›çš„ userId ç›¸ç­‰ã€‚ åœ¨ç„¡æ³•å–å¾— userId çš„æŸäº›æƒ…å½¢ä¸‹ï¼Œsource_user_id çš„å€¼å°‡æœƒèˆ‡ source_group_id ç›¸ç­‰ã€‚ ä½ å¯ä»¥ä½¿ç”¨ä»¥ä¸‹ç¨‹å¼ç¢¼å–å¾— source_user_id: params[:source_user_id] èº«åˆ†é©—è­‰ ä½ å¯ä»¥å‡è¨­ source_group_id ä»¥åŠ source_user_id æ˜¯ç§˜å¯†è³‡è¨Šï¼Œä»¥ source_group_id å’Œ source_user_id ä¾†è­˜åˆ¥å°è©±æ¡†ä»¥åŠç”¨æˆ¶ã€‚ "},"04_view.html":{"url":"04_view.html","title":"View çš„ä½¿ç”¨èªªæ˜","keywords":"","body":"View çš„ä½¿ç”¨èªªæ˜ åœ¨ view ç•¶ä¸­ï¼Œä½ å¯ä»¥æ ¹æ“šä¸åŒçš„é€šè¨Šå¹³å°ï¼Œå»è£½ä½œå°æ‡‰çš„å›è¦†å…§å®¹ã€‚ Kamigo æœƒæ ¹æ“šç›®å‰çš„å¹³å°ï¼Œé¸æ“‡å°æ‡‰çš„ render formatï¼Œä»¥ LINE ä¾†èªªå°±æœƒæ˜¯ .lineã€‚ ç”±æ–¼ Kamigo ç›®å‰åªæ”¯æ´ LINE é€šè¨Šå¹³å°ï¼Œå› æ­¤ç›®å‰åªæœ‰ .line å¯ä»¥ä½¿ç”¨ã€‚ èˆ‰ä¾‹ä¾†èªªï¼Œå¦‚æœä½ åœ¨ config/routes.rb å¯«å…¥ä»¥ä¸‹ç¨‹å¼ï¼š get \"ç›®éŒ„\", to: 'home#index' è€Œä¸”ä½ æœ‰ app/controllers/home_controller å…§å®¹å¦‚ä¸‹ï¼š class HomeController å³è¡¨ç¤ºä½ æ‡‰è©²è¦åœ¨ app/views/home/index.line æˆ–è€… app/views/home/index.line.erb æˆ–è€… app/views/home/index.line.jbuilder ä¾†å¯«ä½ çš„å›è¦†è¨Šæ¯ã€‚ æ¯”æ–¹èªªï¼Œä½ å¯ä»¥åœ¨ app/views/home/index.line è¼¸å…¥ä»¥ä¸‹è¨Šæ¯ï¼š { \"type\": \"text\", \"text\": \"Hello, world\" } æˆ–è€…ä½ å¯ä»¥åœ¨ app/views/home/index.line.erb è¼¸å…¥ä»¥ä¸‹è¨Šæ¯ï¼š æˆ–è€…ä½ å¯ä»¥åœ¨ app/views/home/index.line.jbuilder è¼¸å…¥ä»¥ä¸‹è¨Šæ¯ï¼š json.type \"text\" json.text \"Hello, world\" æœ€çµ‚éƒ½æœƒç”¢ç”Ÿå‡ºä¸€æ¨£çš„ jsonï¼Œä¹Ÿå°±æ˜¯ LINE Messaging API æ‰€è¦æ±‚çš„æ ¼å¼ï¼š { \"type\": \"text\", \"text\": \"Hello, world\" } ä½¿ç”¨ Flex Message LINE Messaging API æä¾›äº†ä¸€ç¨®è¨Šæ¯æ ¼å¼ï¼Œç¨±ç‚º Flex Messageã€‚ ä½ å¯ä»¥ä½¿ç”¨ Kamiflex ä¾†å¿«é€Ÿç”Ÿæˆ Flex Messageã€‚ ç›®å‰åœ¨ view ç•¶ä¸­ä½¿ç”¨ Kamiflex çš„æ–¹æ³•æ˜¯ä½¿ç”¨ erbï¼Œæ¯”æ–¹èªªåœ¨ app/views/home/index.line.erb è¼¸å…¥ä»¥ä¸‹ç¨‹å¼ç¢¼ï¼š æ›´å¤šçš„ Kamiflex ä½¿ç”¨èªªæ˜ ä½¿ç”¨ LIFF æ›´æ› LIFF Size ä½¿ç”¨ liff_path æ–¹æ³•æ™‚ï¼Œæ–°å¢æŒ‡å®šåƒæ•¸ liff_sizeï¼š "},"05_kamiflex.html":{"url":"05_kamiflex.html","title":"Kamiflex çš„ä½¿ç”¨èªªæ˜","keywords":"","body":"æ¦‚è§€ Kamiflexè®“ä½ ä»¥ç¨‹å¼ç¢¼çš„æ–¹å¼å–ä»£Flex Messages JSONï¼Œé”åˆ°æ–¹ä¾¿ã€ç°¡æ½”ã€æ˜“ç¶­è­·æ˜“æ“´å±•çš„ç›®çš„ã€‚Kamiflexç›®å‰åƒ…æ”¯æ´Lineå¹³å°ä¸Šçš„Flex Messageï¼Œåœ¨Kamiflexä¹‹ä¸‹Line Flex Messageçš„æ¶æ§‹å¦‚ä¸‹ï¼š ä»¥kamigoé è¨­çš„index.line.erbç‚ºä¾‹ï¼Œå…¶è½‰æ›ç‚ºJsonçš„é—œä¿‚åœ–å¦‚ä¸‹ï¼š ä¸Šåœ–æ•¸å­—ä»£è¡¨æ„ç¾©ç‚ºï¼š Flex Message Meta æ ¸å¿ƒå…ƒä»¶ å®¹å™¨å…ƒä»¶ åŸºç¤çµ„ä»¶ ä»¥Kamiflexç·¨å¯«çš„ç¨‹å¼ç¢¼æœƒæ˜¯ä»¥ä¸‹ï¼š Kamiflex.build(self) do #Flex Message Header bubble do #æ ¸å¿ƒå…ƒä»¶ body do #æ ¸å¿ƒå…ƒä»¶å±¬æ€§ horizontal_box do #å®¹å™¨å…ƒä»¶ text \"ğŸ”\", flex: 0, action: message_action(\"/\") #åŸºç¤çµ„ä»¶ text \"Todos\" #åŸºç¤çµ„ä»¶ text \"ğŸ†•\", align: \"end\", action: uri_action(new_todo_path)#åŸºç¤çµ„ä»¶ end separator #åŸºç¤çµ„ä»¶ if @todos.present? vertical_box margin: \"lg\" do #å®¹å™¨å…ƒä»¶ horizontal_box @todos, margin: \"lg\" do |todo| #å®¹å™¨å…ƒä»¶ text todo.name, action: message_action(\"/todos/#{todo.id}\") #åŸºç¤çµ„ä»¶ text \"âŒ\", align: \"end\", action: message_action(\"DELETE /todos/#{todo.id}\") #åŸºç¤çµ„ä»¶ end end else text \"no contents yet\", margin: \"lg\" #åŸºç¤çµ„ä»¶ end end end end åœ¨éƒ¨åˆ†çš„å…ƒä»¶å¾ŒæœƒåŠ å…¥ä¸€äº›å±¬æ€§ï¼Œé”åˆ°ä¿®é£¾çš„æ•ˆæœã€‚ä¾‹å¦‚text \"no contents yet\", margin: \"lg\"ï¼Œé€™æ˜¯ä¸€å€‹æ–‡å­—åŸºç¤å…ƒä»¶ï¼Œtext \"no contents yet\"ç‚ºä¸»é¡Œï¼Œå¾Œæ–¹çš„margin: \"lg\"å‰‡ç”¨ä¾†ä¿®æ”¹è©²å…ƒä»¶çš„å±¬æ€§ï¼Œéƒ¨ä»½å…ƒä»¶çš„å±¬æ€§ä¿®æ”¹å‰‡æ˜¯æ”¾ç½®æ–¼Blockä¸­ï¼Œè«‹ä¾æ“šæ–‡ä»¶è¦ç¯„ç·¨å¯«ï¼Œè‹¥ä¸é¡å¤–æŒ‡å®šå‰‡æœƒä½¿ç”¨é è¨­çš„å±¬æ€§ã€‚ é—œæ–¼å±¬æ€§å…§å®¹è©³ç´°èªªæ˜è«‹åƒç…§flex message object "},"kamiflex/flex_message_meta.html":{"url":"kamiflex/flex_message_meta.html","title":"Flex Message Meta","keywords":"","body":"Flex Message Meta Flex Message Metaæ˜¯æ¯ä¸€å€‹Flex Messageä¸€å®šæœƒåŒ…å«çš„éƒ¨åˆ†ï¼Œå…¶Jsonç‚º { type: \"flex\", altText: \"this is a flex message\", contents: {...} } å°æ‡‰çš„Kamiflexç¨‹å¼ç¢¼ç‚º Kamiflex.build(self) do ... end kamiflexæœƒå°‡è©²ç¨‹å¼ç¢¼è½‰æ›ç‚ºJsonï¼Œ{...}ç‚ºblockï¼Œå¯ä»¥åœ¨å…¶ä¸­æ”¾å…¥æ ¸å¿ƒå…ƒä»¶(å¦‚bubbleã€carousel)ã€‚ å±¬æ€§ alt_text èªªæ˜ æ­¤å±¬æ€§çš„ä¿®æ”¹æ”¾åœ¨Blockä¸­ï¼Œé è¨­æ–‡å­—ç‚ºthis is a flex messageã€‚ ä½¿ç”¨ç¯„ä¾‹ { \"type\": \"flex\", \"altText\": \"test alt text\", \"contents\": { \"type\": \"bubble\", \"body\": { \"type\": \"box\", \"layout\": \"vertical\", \"contents\": [ { \"type\": \"text\", \"text\": \"Hello, World!\" } ] } } } é‹è¡Œçµæœ "},"kamiflex/core.html":{"url":"kamiflex/core.html","title":"æ ¸å¿ƒå…ƒä»¶","keywords":"","body":"æ ¸å¿ƒå…ƒä»¶ æ ¸å¿ƒå…ƒä»¶éœ€è¢«å¯«åœ¨Flex Message Metaçš„blockä¹‹ä¸­ã€‚ bubble èªªæ˜ æ­¤å…ƒä»¶ç‚ºFlex Messageæœ€åŸºç¤ä¹‹æ ¸å¿ƒå…ƒä»¶ã€‚ è©³ç´°èªªæ˜è«‹åƒè€ƒä»¥ä¸‹é€£çµï¼š LINE Flex Message é—œæ–¼ Bubble çš„èªªæ˜æ–‡ä»¶ LINE Flex Message é—œæ–¼ Bubble çš„ API Reference ç›¸é—œåƒæ•¸ è«‹åƒè€ƒå®˜æ–¹æ–‡ä»¶ä¸­çš„bubble ä½¿ç”¨ç¯„ä¾‹ Rubyå¯«æ³•ï¼š Kamiflex.build(self) do bubble size: \"nano\",direction: \"ltr\" do body do text \"Hello, World!\" end end end å°æ‡‰çš„Jsonï¼š { \"type\": \"flex\", \"altText\": \"this is a flex message\", \"contents\": { \"type\": \"bubble\", \"body\": { \"type\": \"box\", \"layout\": \"vertical\", \"contents\": [ { \"type\": \"text\", \"text\": \"Hello, World!\" } ] }, \"size\": \"nano\", \"direction\": \"ltr\" } } bubbles èªªæ˜ æ­¤å…ƒä»¶éœ€ä½¿ç”¨åœ¨carouselä¹‹ä¸­ï¼Œé”æˆæ©«å‘å¤šç­†Flex Messageï¼Œè‹¥ä¸ä½¿ç”¨æ­¤æ ¸å¿ƒå…ƒä»¶ï¼Œäº¦å¯ä½¿ç”¨RubyåŸç”Ÿçš„#eachæ­é…bubbleé”åˆ°ç›¸åŒåŠŸèƒ½ã€‚ ç›¸é—œåƒæ•¸ èˆ‡bubbleç›¸åŒï¼Œè«‹åƒè€ƒå®˜æ–¹æ–‡ä»¶ä¸­çš„bubble ä½¿ç”¨ç¯„ä¾‹ ä½¿ç”¨bubblesçš„Rubyå¯«æ³•ï¼š @strings = [\"string1\", \"string2\", \"string3\"] Kamiflex.build(self) do carousel do bubbles @strings, size: \"nano\", direction: \"ltr\" do |string| body do text string end end end end ä¸ä½¿ç”¨bubblesçš„Rubyå¯«æ³•ï¼š Kamiflex.build(self) do carousel do @strings.each do |string| bubble size: \"nano\", direction: \"ltr\" do body do text string end end end end end å°æ‡‰çš„Jsonï¼š { \"type\": \"flex\", \"altText\": \"this is a flex message\", \"contents\": { \"type\": \"carousel\", \"contents\": [ { \"type\": \"bubble\", \"body\": { \"type\": \"box\", \"layout\": \"vertical\", \"contents\": [ { \"type\": \"text\", \"text\": \"string1\" } ] }, \"size\": \"nano\", \"direction\": \"ltr\" }, { \"type\": \"bubble\", \"body\": { \"type\": \"box\", \"layout\": \"vertical\", \"contents\": [ { \"type\": \"text\", \"text\": \"string2\" } ] }, \"size\": \"nano\", \"direction\": \"ltr\" }, { \"type\": \"bubble\", \"body\": { \"type\": \"box\", \"layout\": \"vertical\", \"contents\": [ { \"type\": \"text\", \"text\": \"string3\" } ] }, \"size\": \"nano\", \"direction\": \"ltr\" } ] } } carousel èªªæ˜ æ­¤å…ƒä»¶å¯ä»¥é”æˆæ©«å‘å¤šç­†çš„Flex Messageï¼Œä½†åœ¨å…¶ä¹‹ä¸­é‚„éœ€è¦åŠ ä¸Šbubbleå…ƒä»¶ã€‚ LINE Flex Message é—œæ–¼ Carousel çš„èªªæ˜æ–‡ä»¶ LINE Flex Message é—œæ–¼ Carousel çš„ API Reference ç›¸é—œåƒæ•¸ æœ€å¤šåƒ…èƒ½12å€‹bubble ä½¿ç”¨ç¯„ä¾‹ ä½¿ç”¨bubblesçš„Rubyå¯«æ³•ï¼š @strings = [\"string1\", \"string2\", \"string3\"] Kamiflex.build(self) do carousel do bubbles @strings, size: \"nano\", direction: \"ltr\" do |string| body do text string end end end end ä¸ä½¿ç”¨bubblesçš„Rubyå¯«æ³•ï¼š Kamiflex.build(self) do carousel do @strings.each do |string| bubble size: \"nano\", direction: \"ltr\" do body do text string end end end end end å°æ‡‰çš„Jsonï¼š { \"type\": \"flex\", \"altText\": \"this is a flex message\", \"contents\": { \"type\": \"carousel\", \"contents\": [ { \"type\": \"bubble\", \"body\": { \"type\": \"box\", \"layout\": \"vertical\", \"contents\": [ { \"type\": \"text\", \"text\": \"string1\" } ] }, \"size\": \"nano\", \"direction\": \"ltr\" }, { \"type\": \"bubble\", \"body\": { \"type\": \"box\", \"layout\": \"vertical\", \"contents\": [ { \"type\": \"text\", \"text\": \"string2\" } ] }, \"size\": \"nano\", \"direction\": \"ltr\" }, { \"type\": \"bubble\", \"body\": { \"type\": \"box\", \"layout\": \"vertical\", \"contents\": [ { \"type\": \"text\", \"text\": \"string3\" } ] }, \"size\": \"nano\", \"direction\": \"ltr\" } ] } } å±¬æ€§ æ ¸å¿ƒå…ƒä»¶å±¬æ€§éœ€æ”¾ç½®åœ¨bubbleæˆ–æ˜¯bubblesçš„blockä¹‹ä¸­ï¼Œä¸¦ä¸”å„å€‹å±¬æ€§æ‡‰ç¢ºä¿å…¶JsonåŒå±¤è€Œä¸å­˜åœ¨ä¸Šä¸‹å±¤é—œè¯ã€‚ header èªªæ˜ å‘ˆç¾åœ¨Flex Messageæœ€é ‚éƒ¨ï¼Œä¸€èˆ¬ç”¨ä¾†æ”¾ç½®æ¨™é¡Œä½¿ç”¨ ç›¸é—œåƒæ•¸ \bKamflexæœƒç‚ºheaderè‡ªå‹•å‰µç«‹ä¸€å€‹å®¹å™¨å…ƒä»¶boxï¼Œé—œæ–¼å®¹å™¨å…ƒä»¶boxåƒæ•¸è«‹åƒè€ƒå®˜æ–¹æ–‡ä»¶ä¸­çš„box æ­¤è™•ç„¡æ³•ç›´æ¥ä½¿ç”¨headeråƒæ•¸ï¼Œè‹¥æƒ³ä½¿ç”¨headeråƒæ•¸è«‹æ­é…styles ä½¿ç”¨ç¯„ä¾‹ Rubyçš„å¯«æ³•ï¼š Kamiflex.build(self) do bubble do header layout: \"vertical\", borderWidth: \"light\", backgroundColor: \"#c3c3c3\" do text \"hello, wrold!\" end end end å°æ‡‰çš„jsonï¼š { \"type\": \"flex\", \"altText\": \"this is a flex message\", \"contents\": { \"type\": \"bubble\", \"header\": { \"type\": \"box\", \"layout\": \"vertical\", \"contents\": [ { \"type\": \"text\", \"text\": \"hello, wrold!\" } ], \"borderWidth\": \"light\", \"backgroundColor\": \"#c3c3c3\" } } } hero èªªæ˜ å‘ˆç¾åœ¨Flex Message headerä¹‹ä¸‹ï¼Œbodyä¹‹ä¸Šï¼Œä¸€èˆ¬ç”¨ä¾†æ”¾ç½®åœ–ç‰‡ï¼Œç”±æ–¼ä¸éœ€è¦æ­é…blockã€‚å¾Œæ–¹ä¸éœ€å†åŠ å…¥{...}æˆ–æ˜¯do...endã€‚ ç›¸é—œåƒæ•¸ kamiflexé è¨­heroçš„typeç‚ºimageå…ƒä»¶ï¼Œå› æ­¤éœ€æ­é…imageå…ƒä»¶åƒæ•¸ä½¿ç”¨ æ­¤è™•ç„¡æ³•ç›´æ¥ä½¿ç”¨heroåƒæ•¸ï¼Œè‹¥æƒ³ä½¿ç”¨heroåƒæ•¸è«‹æ­é…styles heroçš„typeé™¤äº†imageå…ƒä»¶å¤–ï¼Œä¹Ÿå¯ä»¥é¸æ“‡ç‚ºboxå…ƒä»¶ ä½¿ç”¨ç¯„ä¾‹ Rubyçš„å¯«æ³•ï¼š Kamiflex.build(self) do bubble do hero \"https://scdn.line-apps.com/n/channel_devcenter/img/fx/01_1_cafe.png\", size: :full, aspectRatio: \"20:13\" end end å°æ‡‰çš„json: { \"type\": \"flex\", \"altText\": \"this is a flex message\", \"contents\": { \"type\": \"bubble\", \"hero\": { \"type\": \"image\", \"url\": \"https://scdn.line-apps.com/n/channel_devcenter/img/fx/01_1_cafe.png\", \"size\": \"full\", \"aspectRatio\": \"20:13\" } } } body èªªæ˜ å‘ˆç¾åœ¨Flex Messageä¸­é–“çš„ä½ç½®ï¼Œä¸€èˆ¬ç”¨æ–¼è¡¨é”å…§æ–‡ã€‚ åƒæ•¸ \bKamflexæœƒç‚ºbodyè‡ªå‹•å‰µç«‹ä¸€å€‹å®¹å™¨å…ƒä»¶boxï¼Œé—œæ–¼å®¹å™¨å…ƒä»¶boxåƒæ•¸è«‹åƒè€ƒå®˜æ–¹æ–‡ä»¶ä¸­çš„box æ­¤è™•ç„¡æ³•ç›´æ¥ä½¿ç”¨bodyåƒæ•¸ï¼Œè‹¥æƒ³ä½¿ç”¨bodyåƒæ•¸è«‹æ­é…styles ä½¿ç”¨ç¯„ä¾‹ Rubyå¯«æ³•ï¼š Kamiflex.build(self) do bubble do body layout: \"vertical\", borderWidth: \"light\", backgroundColor: \"#c3c3c3\" do text \"hello, wrold!\" end end end å°æ‡‰çš„jsonï¼š { \"type\": \"flex\", \"altText\": \"this is a flex message\", \"contents\": { \"type\": \"bubble\", \"body\": { \"type\": \"box\", \"layout\": \"vertical\", \"contents\": [ { \"type\": \"text\", \"text\": \"hello, wrold!\" } ], \"borderWidth\": \"light\", \"backgroundColor\": \"#c3c3c3\" } } } footer èªªæ˜ å‘ˆç¾åœ¨Flex Messageæœ€åº•éƒ¨çš„ä½ç½®ï¼Œä¸€èˆ¬ç”¨æ–¼æ”¾ç½®æŒ‰éˆ•ã€‚ åƒæ•¸ \bKamflexæœƒç‚ºfooterè‡ªå‹•å‰µç«‹ä¸€å€‹å®¹å™¨å…ƒä»¶boxï¼Œé—œæ–¼å®¹å™¨å…ƒä»¶boxåƒæ•¸è«‹åƒè€ƒå®˜æ–¹æ–‡ä»¶ä¸­çš„box æ­¤è™•ç„¡æ³•ç›´æ¥ä½¿ç”¨footeråƒæ•¸ï¼Œè‹¥æƒ³ä½¿ç”¨bodyåƒæ•¸è«‹æ­é…styles ä½¿ç”¨ç¯„ä¾‹ Rubyå¯«æ³•ï¼š Kamiflex.build(self) do bubble do footer layout: \"vertical\", borderWidth: \"light\", backgroundColor: \"#c3c3c3\" do text \"hello, wrold!\" end end end å°æ‡‰çš„jsonï¼š { \"type\": \"flex\", \"altText\": \"this is a flex message\", \"contents\": { \"type\": \"bubble\", \"footer\": { \"type\": \"box\", \"layout\": \"vertical\", \"contents\": [ { \"type\": \"text\", \"text\": \"hello, wrold!\" } ], \"borderWidth\": \"light\", \"backgroundColor\": \"#c3c3c3\" } } } styles èªªæ˜ ä¸»è¦åŠŸèƒ½ç‚ºæ›´æ”¹æ ¸å¿ƒå…ƒä»¶å±¬æ€§çš„styleã€‚ ç›¸é—œåƒæ•¸ è«‹åƒè€ƒå®˜æ–¹æ–‡ä»¶ä¸­çš„block style ä½¿ç”¨ç¯„ä¾‹ Rubyå¯«æ³•ï¼š Kamiflex.build(self) do bubble size: \"mega\" do header do text \"Kamiflex\" end hero \"https://stickershop.line-scdn.net/stickershop/v1/product/1500785/LINEStorePC/main.png;compress=true\" body do text \"\bç”¨kamiflexå°±æ˜¯é€™éº¼ç°¡å–®\",wrap: true end footer do message_button \"åŒæ„\", \"ä¸åªå¥½ç”¨é‚„å¥½æ½®ï¼çœŸçš„è®šï¼\" end styles ({ header: { \"backgroundColor\": \"#ffffff\", \"separator\": true, \"separatorColor\": \"#c2c2c2\", }, hero: { \"separator\": true, \"separatorColor\": \"#c2c2c2\", }, body: { \"backgroundColor\": \"#ffffff\", \"separator\": true, \"separatorColor\": \"#c2c2c2\", }, footer: { \"backgroundColor\": \"#ffffff\", \"separator\": true, \"separatorColor\": \"#c2c2c2\", } }) end end å°æ‡‰çš„jsonï¼š { \"type\": \"flex\", \"altText\": \"this is a flex message\", \"contents\": { \"type\": \"bubble\", \"header\": { \"type\": \"box\", \"layout\": \"vertical\", \"contents\": [ { \"type\": \"text\", \"text\": \"Kamiflex\" } ] }, \"hero\": { \"type\": \"image\", \"url\": \"https://stickershop.line-scdn.net/stickershop/v1/product/1500785/LINEStorePC/main.png;compress=true\" }, \"body\": { \"type\": \"box\", \"layout\": \"vertical\", \"contents\": [ { \"type\": \"text\", \"text\": \"\\bç”¨kamiflexå°±æ˜¯é€™éº¼ç°¡å–®\", \"wrap\": true } ] }, \"footer\": { \"type\": \"box\", \"layout\": \"vertical\", \"contents\": [ { \"type\": \"button\", \"action\": { \"type\": \"message\", \"label\": \"åŒæ„\", \"text\": \"ä¸åªå¥½ç”¨é‚„å¥½æ½®ï¼çœŸçš„è®šï¼\" } } ] }, \"styles\": { \"header\": { \"backgroundColor\": \"#ffffff\", \"separator\": true, \"separatorColor\": \"#c2c2c2\" }, \"hero\": { \"separator\": true, \"separatorColor\": \"#c2c2c2\" }, \"body\": { \"backgroundColor\": \"#ffffff\", \"separator\": true, \"separatorColor\": \"#c2c2c2\" }, \"footer\": { \"backgroundColor\": \"#ffffff\", \"separator\": true, \"separatorColor\": \"#c2c2c2\" } }, \"size\": \"mega\" } } "},"kamiflex/container.html":{"url":"kamiflex/container.html","title":"å®¹å™¨å…ƒä»¶","keywords":"","body":"å®¹å™¨å…ƒä»¶ å®¹å™¨å…ƒä»¶éœ€è¢«å¯«åœ¨æ ¸å¿ƒå…ƒä»¶æˆ–æ˜¯æ ¸å¿ƒå…ƒä»¶å±¬æ€§çš„blockä¹‹ä¸­ã€‚ box horizontal_box vertical_box baseline_box èªªæ˜ ä½¿ç”¨ç¯„ä¾‹icon separator spacer filler "},"kamiflex/basic_element.html":{"url":"kamiflex/basic_element.html","title":"åŸºç¤çµ„ä»¶","keywords":"","body":"åŸºç¤çµ„ä»¶ åŸºç¤çµ„ä»¶éœ€è¢«åŒ…å«åœ¨å®¹å™¨å…ƒä»¶ä¸­æˆ–æ˜¯éƒ¨åˆ†çš„å·²å«æœ‰å®¹å™¨å…ƒä»¶çš„æ ¸å¿ƒå…ƒä»¶å±¬æ€§(å¦‚:headerã€bodyã€footer)ã€‚ text èªªæ˜ ä½¿ç”¨ç¯„ä¾‹ image èªªæ˜ ä½¿ç”¨ç¯„ä¾‹ button message_button postback_button postback_text_button èªªæ˜ ä½¿ç”¨ç¯„ä¾‹ "},"06_form.html":{"url":"06_form.html","title":"Form çš„ä½¿ç”¨èªªæ˜","keywords":"","body":"Form çš„ä½¿ç”¨èªªæ˜ Kamigo ä½¿ç”¨ Kamiliff ä¾†è£½ä½œ LIFF å½¢å¼çš„è¡¨å–®ã€‚ LIFF æ˜¯å¯ä»¥åœ¨ LINE é–‹å•Ÿç¶²é ï¼Œä¸¦ä¸”å¯ä»¥è®“ä½ ç²å¾—ç›®å‰ä½¿ç”¨è€…ç›¸é—œè³‡è¨Šï¼Œä»¥åŠå¹«ä½¿ç”¨è€…ç™¼è¨Šæ¯çš„æŠ€è¡“ã€‚ Kamiliff è®“ä½ å¯ä»¥ä¸ç”¨æ’°å¯« jsï¼Œå°±èƒ½å¤ è£½ä½œè¡¨å–®ã€‚ "},"07_setting.html":{"url":"07_setting.html","title":"Kamigo ç›¸é—œè¨­å®šèˆ‡ QA","keywords":"","body":"Webhook URL è¨­å®š QA å¦‚ä½•è¨­å®šé–‹ç™¼ç’°å¢ƒç¶²åŸŸï¼Ÿ å®‰è£ ngrokã€‚ åœ¨ bash åŸ·è¡Œ ngrok ä¾†ç²å¾—å°æ‡‰ http://localhost:3000 çš„ç¶²åŸŸã€‚ $ ./ngrok http 3000 å°‡ç²å¾—çš„ç¶²åŸŸæ›¿æ›æ‰èŠ±åˆ®è™Ÿçš„éƒ¨åˆ†å¾Œï¼Œå¡«å…¥ Webhook URL æ¬„ä½ã€‚ï¼ˆç•™æ„ç¶²åŸŸå¾Œæ˜¯å¦æœ‰ç¢ºå¯¦åŠ ä¸Š /lineï¼‰ https://{NGROK_HTTPS_DOMAIN}/line åœ¨ Messaging API å¾Œå°é–‹å•Ÿ Use webhook è¨­å®šã€‚ å¦å¤–é–‹ä¸€å€‹ bash åŸ·è¡Œ $ rails sã€‚ é»æ“Š Verify æŒ‰éˆ•ç™¼é€ä¸€å€‹ POST Request ç¢ºèªè¨­å®šæ˜¯å¦æˆåŠŸã€‚ é‡é–‹ ngrok å¾Œï¼ŒWebhook URL å°±å¤±æ•ˆäº†ï¼Ÿ è‹¥ä½ é‡æ–°åŸ·è¡Œ ngrokï¼Œå‰‡ ngrok æœƒç”¢ç”Ÿæ–°çš„ç¶²åŸŸï¼Œä½ éœ€è¦è®Šæ›´ LINE Bot çš„ Webhook URL å’Œ LIFF app çš„ Endpoint URL ç‚ºæ–°çš„ç¶²åŸŸã€‚ å®Œæˆä¸²æ¥æµç¨‹ï¼Œä½† Kamigo æ²’æœ‰åæ‡‰ï¼Ÿ è‹¥ Webhook URL å’Œ .env æª”éƒ½è¨­å®šå®Œï¼ŒKamigo ä»æ²’æœ‰åæ‡‰ï¼Œè«‹ç¢ºèªä»¥ä¸‹å…©å€‹è¨­å®šï¼š ç¢ºèªä½ çš„ç¶²åŸŸæ˜¯å¦æ­£ç¢ºã€‚ ç¢ºèª Use webhook æ˜¯å¦ç‚ºé–‹å•Ÿç‹€æ…‹ã€‚ LIFF è¨­å®š QA å¦‚ä½•æ–°å¢ LIFFï¼Ÿ ç”±æ–¼ LIFF v2 æ”¹å–„ï¼ŒLINE å®˜æ–¹åœ¨ 2020/02/05 ç™¼å¸ƒé€šçŸ¥ï¼Œæ—¥å¾Œæ–°å¢ LIFF éœ€åˆ° LINE Login çš„ LIFF åˆ†é æ–°å¢ï¼ŒåŸå…ˆåœ¨ Messaging API æ–°å¢çš„ LIFF é‚„èƒ½ç¹¼çºŒä½¿ç”¨ã€‚ åœ¨ LINE Login å¾Œå°æ–°å¢ 3 ç¨®ä¸åŒ size çš„ LIFFï¼Œæ–°å¢å®Œæœƒå„ç²å¾—ä¸€çµ„ LIFF URLï¼›è‹¥ä½ åœ¨ Messaging API æœ‰è¨­å®šå¥½çš„ LIFFï¼Œè«‹åƒè€ƒä¸‹æ–¹è¨­å®šä¿®æ”¹ Endpoint URLã€‚ï¼ˆç•™æ„ç¶²åŸŸå¾Œæ˜¯å¦æœ‰ç¢ºå¯¦åŠ ä¸Š /liff_entryï¼‰ Compact LIFF app name: Compact Size: Compact Endpoint URL: https://ä½ çš„ç¶²åŸŸ/liff_entry Tall LIFF app name: Tall Size: Tall Endpoint URL: https://ä½ çš„ç¶²åŸŸ/liff_entry Full LIFF app name: Full Size: Full Endpoint URL: https://ä½ çš„ç¶²åŸŸ/liff_entry åœ¨ .env æª”ä¸­åˆ†åˆ¥å¡«å…¥å°æ‡‰ size çš„ 3 å€‹ LIFF URLã€‚ æ–¼ Messaging API æ‰€å»ºç«‹çš„ LIFFï¼ˆv1ï¼‰ LIFF_COMPACT=line://app/{FOR_COMPACT_LIFF_ID} LIFF_TALL=line://app/{FOR_TALL_LIFF_ID} LIFF_FULL=line://app/{FOR_FULL_LIFF_ID} æ–¼ LINE Login æ‰€å»ºç«‹çš„ LIFFï¼ˆv2ï¼‰ LIFF_COMPACT=https://liff.line.me/{FOR_COMPACT_LIFF_ID} LIFF_TALL=https://liff.line.me/{FOR_TALL_LIFF_ID} LIFF_FULL=https://liff.line.me/{FOR_FULL_LIFF_ID} "}}